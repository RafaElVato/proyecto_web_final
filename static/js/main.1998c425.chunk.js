(this["webpackJsonpproyecto-final"]=this["webpackJsonpproyecto-final"]||[]).push([[0],{20:function(e,t,n){},23:function(e,t,n){"use strict";n.r(t);var c=n(2),r=n.n(c),s=n(14),a=n.n(s),o=(n(20),n(4)),l=n.n(o),i=n(6),u=n(5),x=n(15),b="https://posts-pw2021.herokuapp.com/api/v1",j={};j.login=function(){var e=Object(i.a)(l.a.mark((function e(t,n){var c,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(b,"/auth/signin"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t,password:n})});case 2:if(!(c=e.sent).ok){e.next=8;break}return e.next=6,c.json();case 6:return r=e.sent,e.abrupt("return",r);case 8:return e.abrupt("return",{});case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),j.verifyToken=function(){var e=Object(i.a)(l.a.mark((function e(t){var n,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(b,"/auth/whoami"),{method:"GET",headers:{Authorization:"Bearer ".concat(t)}});case 2:if(!(n=e.sent).ok){e.next=8;break}return e.next=6,n.json();case 6:return c=e.sent,e.abrupt("return",c);case 8:return e.abrupt("return",{});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j.getOne=function(){var e=Object(i.a)(l.a.mark((function e(t){var n,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(b,"/posts/one/").concat(t),{method:"GET",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});case 2:if(!(n=e.sent).ok){e.next=9;break}return e.next=6,n.json();case 6:return c=e.sent,console.log(c),e.abrupt("return",c);case 9:return e.abrupt("return",{});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j.getAll=function(){var e=Object(i.a)(l.a.mark((function e(t){var n,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(b,"/post/all?limit=10&page=").concat(t),{method:"GET",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});case 2:if(!(n=e.sent).ok){e.next=11;break}return e.next=6,n.json();case 6:return c=e.sent,console.log(c),e.abrupt("return",c);case 11:console.log("error");case 12:return e.abrupt("return",{});case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j.getOwned=function(){var e=Object(i.a)(l.a.mark((function e(t){var n,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(b,"/post/owned?limit=10&page=").concat(t),{method:"GET",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});case 2:if(!(n=e.sent).ok){e.next=11;break}return e.next=6,n.json();case 6:return c=e.sent,console.log(c),e.abrupt("return",c);case 11:console.log("error");case 12:return e.abrupt("return",{});case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j.getFavorite=Object(i.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(b,"/post/fav"),{method:"GET",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});case 2:if(!(t=e.sent).ok){e.next=8;break}return e.next=6,t.json();case 6:return n=e.sent,e.abrupt("return",n);case 8:return e.abrupt("return",[]);case 9:case"end":return e.stop()}}),e)}))),j.update=function(){var e=Object(i.a)(l.a.mark((function e(t,n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(b,"/posts/update/").concat(n),{method:"PUT",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-type":"application/json"},body:JSON.stringify(t)});case 2:if(!e.sent.ok){e.next=5;break}return e.abrupt("return",!0);case 5:return e.abrupt("return",!1);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),j.toggle=function(){var e=Object(i.a)(l.a.mark((function e(t,n){var c,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(b,"/post/toggle/").concat(t),{method:"PATCH",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify({active:n})});case 2:if(!(c=e.sent).ok){e.next=10;break}return e.next=6,c.json();case 6:return r=e.sent,e.abrupt("return",r);case 10:console.log("error");case 11:return e.abrupt("return",{});case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),j.likePost=function(){var e=Object(i.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(b,"/post/like/").concat(t),{method:"PATCH",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});case 2:if(!e.sent.ok){e.next=5;break}return e.abrupt("return",!0);case 5:return e.abrupt("return",!1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j.commentPost=Object(i.a)(l.a.mark((function e(){var t,n,c=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:"",n=c.length>1?c[1]:void 0,e.next=4,fetch("".concat(b,"/post/comment/").concat(t),{method:"PATCH",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-type":"application/json"},body:JSON.stringify(n)});case 4:if(!e.sent.ok){e.next=7;break}return e.abrupt("return",!0);case 7:return e.abrupt("return",!1);case 8:case"end":return e.stop()}}),e)})));var d=j,m=n(1),f=r.a.createContext(),h="token",p=function(e){var t=Object(c.useState)(void 0),n=Object(u.a)(t,2),r=n[0],s=n[1],a=Object(c.useState)(void 0),o=Object(u.a)(a,2),b=o[0],j=o[1];Object(c.useEffect)((function(){(function(){var e=Object(i.a)(l.a.mark((function e(){var t,n,c,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=O())){e.next=8;break}return e.next=4,d.verifyToken(t);case 4:n=e.sent,c=n.username,r=n.role,c&&r&&(j({username:c,role:r}),p(t));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[r]);var p=function(e){localStorage.setItem(h,e),s(e)},g=Object(c.useCallback)((function(e,t){return function(){var n=Object(i.a)(l.a.mark((function n(){var c,r,s;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c=!1,n.prev=1,n.next=4,d.login(e,t);case 4:r=n.sent,(s=r.token)&&(p(s),c=!0),n.next=13;break;case 9:n.prev=9,n.t0=n.catch(1),console.error(n.t0),console.error("Error in login");case 13:return n.prev=13,n.abrupt("return",c);case 16:case"end":return n.stop()}}),n,null,[[1,9,13,16]])})));return function(){return n.apply(this,arguments)}}()()}),[]),_=Object(c.useCallback)((function(){j(void 0),p(void 0)}),[]),v=Object(c.useMemo)((function(){return{token:r,user:b,login:g,logout:_}}),[r,b,g,_]);return Object(m.jsx)(f.Provider,Object(x.a)({value:v},e))},g=function(){var e=r.a.useContext(f);if(!e)throw new Error("useUserContext() must be inside of UserProvider");return e},O=function(){return localStorage.getItem(h)},_=n(3),v=n.p+"static/media/LoginPic.a248a50f.png";function w(){var e=g(),t=e.login,n=e.token,r=Object(c.useState)(""),s=Object(u.a)(r,2),a=s[0],o=s[1],x=Object(c.useState)(""),b=Object(u.a)(x,2),j=b[0],d=b[1],f=Object(c.useState)(!1),h=Object(u.a)(f,2),p=h[0],O=h[1],w=function(e,t){t(e.target.value)},N=function(){var e=Object(i.a)(l.a.mark((function e(n){var c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,t(a,j);case 3:c=e.sent,O(!c),o(""),d("");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return n?(console.log("Se loggea"),Object(m.jsx)(_.a,{replace:!0,to:"/redirect"})):Object(m.jsxs)("div",{className:"login-container flex flex-row justify-center items-center min-h-screen  bg-gradient-to-r from-red-500 to-yellow-400 ",children:[Object(m.jsx)("div",{className:"form px-32",children:Object(m.jsxs)("form",{onSubmit:N,className:"flex flex-col justify-center items-center min-h-screen",children:[Object(m.jsx)("h1",{className:"text-white text-5xl font-bold py-5",children:"\xa1Ingresa!"}),Object(m.jsx)("input",{className:"rounded m-3 p-3",type:"text",value:a,onChange:function(e){return w(e,o)},placeholder:"Ingrese su usuario"}),Object(m.jsx)("input",{className:"rounded m-3 p-3",type:"password",value:j,onChange:function(e){return w(e,d)},placeholder:"Ingrese su contrase\xf1a"}),Object(m.jsx)("button",{className:"mt-6 h-auto w-1/2 md:w-min text-xl p-2 bg-purple-500 hover:bg-purple-600 text-white \r focus:outline-none focus:shadow-outline rounded-lg shadow px-7",children:"Login"}),p&&Object(m.jsx)("p",{className:"text-xl font-medium text-red-900 text-center mt-6 animate-pulse",children:"Usuario o contrase\xf1a incorrectos"})]})}),Object(m.jsx)("div",{className:"login-img",children:Object(m.jsx)("img",{src:v,alt:"login"})})]})}var N=function(){var e=Object(c.useState)(""),t=Object(u.a)(e,2),n=t[0],r=t[1],s=Object(c.useState)(""),a=Object(u.a)(s,2),o=a[0],l=a[1],i=Object(c.useState)(""),x=Object(u.a)(i,2),b=x[0],j=x[1],d=Object(c.useState)(!1),f=Object(u.a)(d,2),h=f[0],p=f[1];return Object(m.jsxs)("div",{className:"container mt-5 mb-5 p-5 bg-gray-300 rounded shadow-sm border border-secondary border-top-0 border-left-0 \r border-right-0 border-bottom-0 opacity-75",children:[Object(m.jsx)("h1",{className:"text-2xl font-bold text-center",children:"Crear nuevo post"}),Object(m.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t={title:n,description:o,image:b};""===n||""===o||""===b||n.length<8||n.length>32||o.length<8||!b.startsWith("http")?p(!0):fetch("https://posts-pw2021.herokuapp.com/api/v1/post/create",{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then((function(e){return e.json()})).then((function(e){console.log(e)})).catch((function(e){return console.log(e)}))},children:[Object(m.jsxs)("div",{className:"flex flex-row space-x-8",children:[Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{htmlFor:"title",children:"Titulo"}),Object(m.jsx)("input",{type:"text",className:"form-control rounded",id:"title",value:n,onChange:function(e){return r(e.target.value)}})]}),Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{htmlFor:"description",children:"Descripci\xf3n"}),Object(m.jsx)("input",{type:"text",className:"form-control rounded",id:"description",value:o,onChange:function(e){return l(e.target.value)}})]}),Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{htmlFor:"image",children:"Imagen"}),Object(m.jsx)("input",{type:"text",className:"form-control rounded",id:"image",value:b,onChange:function(e){return j(e.target.value)}})]})]}),Object(m.jsxs)("div",{className:"form-group m-3 text-center",children:[h&&Object(m.jsxs)("div",{className:"alert alert-danger animate-pulse text-red-600 bg-gray-200 font-bold",role:"alert",children:[Object(m.jsx)("p",{children:" El t\xedtulo debe tener entre 8 y 32 characters "}),Object(m.jsx)("p",{children:" La descripci\xf3n debe tener como m\xednimo 8 caracteres "}),Object(m.jsx)("p",{children:" La imagen debe ser un url "}),Object(m.jsx)("p",{children:" Todos los campos son obligatorios "})]}),Object(m.jsx)("button",{type:"submit",className:"mt-6 h-auto w-1/2 md:w-min text-xl p-2 bg-blue-600 hover:bg-blue-700 text-white \r focus:outline-none focus:shadow-outline rounded-lg shadow px-7",children:"Crear"})]})]})]})},k=n(10),y=n(9),S=n(11);function C(e){var t=e.post,n=Object(c.useState)(""),r=Object(u.a)(n,2),s=r[0],a=r[1],o=t.comments.map((function(e){return Object(m.jsxs)("div",{className:"comment-box bg-gray-300 p-2 rounded-lg m-2",children:[Object(m.jsx)("p",{className:"comment-text",children:e.user.username}),Object(m.jsx)("p",{className:"comment-text",children:e.description})]})}));return Object(m.jsxs)("div",{className:"post-box col-md-4 col-sm-6 col-12 p-10 mb-4 shadow-lg rounded bg-gray-200 m-2",children:[Object(m.jsx)("div",{className:"flex flex-row text-center justify-center",children:Object(m.jsx)("button",{className:"like-button bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-4 rounded-full justify-center items-center",onClick:function(){"true"===t.active?d.toggle(t._id,!1):d.toggle(t._id,!0)},children:" x "})}),Object(m.jsxs)("h1",{className:"font-roboto text-black text-center",children:[" ",t.user.username," "]}),Object(m.jsx)("h1",{className:"text-center text-xl font-bold text-black",children:t.title}),Object(m.jsx)("h1",{className:"text-justify text-sm text-black",children:t.description}),Object(m.jsx)("div",{className:"post-box-body-image auto",children:Object(m.jsx)("img",{src:t.image,alt:"post"})}),Object(m.jsxs)("div",{className:"post-box-footer flex flex-row justify-center space-x-36",children:[Object(m.jsxs)("div",{className:"post-box-footer-left-icon flex flex-row",children:[Object(m.jsxs)("button",{className:"btn btn-link",children:[" ",Object(m.jsx)(y.a,{})," "]}),Object(m.jsx)("h1",{className:"text-sm text-black",children:t.comments.length})]}),Object(m.jsx)("div",{className:"post-box-footer-left-icon",children:Object(m.jsxs)("button",{className:"btn btn-link",children:[" ",Object(m.jsx)(k.b,{})," "]})}),Object(m.jsxs)("div",{className:"post-box-footer-left-icon flex flex-row",children:[Object(m.jsxs)("button",{className:"btn btn-link",children:[" ",Object(m.jsx)(y.b,{})," "]}),Object(m.jsx)("h1",{className:"text-sm text-black",children:t.likes.length})]})]}),Object(m.jsxs)("div",{className:"comment-box flex flex-col bg-gray-400 p-3 rounded-sm",children:[Object(m.jsx)("h1",{className:"comment-text text-black font-bold",children:"Comentarios"}),Object(m.jsx)("h1",{className:"comment-text",children:o})]}),Object(m.jsxs)("form",{className:"comment-box flex flex-row justify-center items-center",onSubmit:function(e){var n=t._id,c={description:s};d.commentPost(n,c).then((function(e){console.log(e)})).catch((function(e){console.log(e)})),a("")},children:[Object(m.jsx)("input",{className:"comment-text",type:"text",placeholder:"Comentar",onChange:function(e){return a(e.target.value)}}),Object(m.jsx)("button",{className:"btn btn-link rounded-full bg-blue-600 p-3 m-2",type:"submit",children:Object(m.jsx)(S.a,{})})]})]})}function P(e){var t=e.post,n=Object(c.useState)(""),r=Object(u.a)(n,2),s=r[0],a=r[1],o=t.comments.map((function(e){return Object(m.jsxs)("div",{className:"comment-box bg-gray-300 p-2 rounded-lg m-2",children:[Object(m.jsx)("p",{className:"comment-text",children:e.user.username}),Object(m.jsx)("p",{className:"comment-text",children:e.description})]})}));return Object(m.jsxs)("div",{className:"post-box col-md-4 col-sm-6 col-12 p-10 mb-4 shadow-lg rounded bg-gray-200 m-2",children:[Object(m.jsxs)("h1",{className:"font-roboto text-black text-center",children:[" ",t.user.username," "]}),Object(m.jsx)("h1",{className:"text-center text-xl font-bold text-black",children:t.title}),Object(m.jsx)("h1",{className:"text-justify text-sm text-black",children:t.description}),Object(m.jsx)("div",{className:"post-box-body-image auto",children:Object(m.jsx)("img",{src:t.image,alt:"post"})}),Object(m.jsxs)("div",{className:"post-box-footer flex flex-row justify-center space-x-36",children:[Object(m.jsxs)("div",{className:"post-box-footer-left-icon flex flex-row",children:[Object(m.jsxs)("button",{className:"btn btn-link",children:[" ",Object(m.jsx)(y.a,{})," "]}),Object(m.jsx)("h1",{className:"text-sm text-black",children:t.comments.length})]}),Object(m.jsx)("div",{className:"post-box-footer-left-icon",children:Object(m.jsxs)("button",{className:"btn btn-link",children:[" ",Object(m.jsx)(k.b,{})," "]})}),Object(m.jsxs)("div",{className:"post-box-footer-left-icon flex flex-row",children:[Object(m.jsxs)("button",{className:"btn btn-link",children:[" ",Object(m.jsx)(y.b,{})," "]}),Object(m.jsx)("h1",{className:"text-sm text-black",children:t.likes.length})]})]}),Object(m.jsxs)("div",{className:"comment-box flex flex-col bg-gray-400 p-3 rounded-sm",children:[Object(m.jsx)("h1",{className:"comment-text text-black font-bold",children:"Comentarios"}),Object(m.jsx)("h1",{className:"comment-text",children:o})]}),Object(m.jsxs)("form",{className:"comment-box flex flex-row justify-center items-center",onSubmit:function(e){var n=t._id,c={description:s};d.commentPost(n,c).then((function(e){console.log(e)})).catch((function(e){console.log(e)})),a("")},children:[Object(m.jsx)("input",{className:"comment-text",type:"text",placeholder:"Comentar",onChange:function(e){return a(e.target.value)}}),Object(m.jsx)("button",{className:"btn btn-link rounded-full bg-blue-600 p-3 m-2",type:"submit",children:Object(m.jsx)(S.a,{})})]})]})}function T(){var e=Object(_.g)(),t=g().logout,n=Object(c.useState)([]),r=Object(u.a)(n,2),s=r[0],a=r[1],o=Object(c.useState)([]),x=Object(u.a)(o,2),b=x[0],j=x[1],f=Object(c.useState)(0),h=Object(u.a)(f,2),p=h[0],O=h[1],v=Object(c.useState)(0),w=Object(u.a)(v,2),k=w[0],y=w[1],S=Object(c.useState)(""),T=Object(u.a)(S,2),A=T[0],B=T[1],I=Object(c.useState)([]),E=Object(u.a)(I,2),z=E[0],L=E[1];Object(c.useEffect)((function(){(function(){var e=Object(i.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.getAll(p);case 2:t=e.sent,a(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[p]),Object(c.useEffect)((function(){(function(){var e=Object(i.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.getOwned(k);case 2:t=e.sent,j(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[k]);var F=s.map((function(e){return Object(m.jsx)(P,{post:e},e.id)})),J=b.map((function(e){return Object(m.jsx)(C,{post:e},e.id)}));return Object(m.jsx)("main",{className:"flex gap-4 flex-col lg:flex-row justify-around items-center p-6 lg:p-10 min-h-screen  bg-gradient-to-r from-green-400 via-blue-500 to-indigo-600 w-screen",children:Object(m.jsxs)("section",{className:"w-4/5 lg:w-1/2 gap-6 h-full flex flex-col justify-center items-center",children:[Object(m.jsx)("h1",{className:"text-6xl text-black text-center w-screen",children:"\xa1Bienvenido a la p\xe1gina de admin!"}),Object(m.jsx)("div",{className:"flex flex-col",children:Object(m.jsx)(N,{})}),Object(m.jsxs)("form",{className:"flex flex-row gap-4",children:[Object(m.jsx)("input",{className:"w-full py-2 px-16 rounded-lg outline-none",type:"text",placeholder:"Buscar Post",onChange:function(e){return B(e.target.value)}}),Object(m.jsx)("button",{className:"w-full rounded-lg bg-pink-500 hover:bg-pink-600",type:"button",onClick:function(e){return function(e){var t=s.filter((function(t){return t.title.toLowerCase().includes(e.toLowerCase())}));L(t)}(A)},children:"Buscar"})]}),Object(m.jsxs)("div",{className:"flex flex-col gap-4",children:[Object(m.jsx)("h1",{className:"text-2xl font-medium text-black text-center",children:"Posts encontrados "}),Object(m.jsx)("div",{className:"flex flex-col gap-4",children:z.map((function(e){return Object(m.jsx)(P,{post:e},e.id)}))})]}),Object(m.jsx)("h1",{className:"text-xl font-medium text-white text-center mt-6",children:"__________________________________________"}),Object(m.jsxs)("div",{className:"flex flex-col mt-6 justify-center content-center",children:[Object(m.jsx)("h1",{className:"text-2xl font-medium text-black text-center",children:"Tus posts"}),Object(m.jsx)("div",{className:"flex flex-col content-center md:w-min",children:J}),Object(m.jsxs)("div",{className:"flex flex-row gap-4 justify-center",children:[Object(m.jsx)("button",{onClick:function(){y(0!==k?k-1:0)},className:"mt-6 h-auto w-1/2 md:w-min text-xl p-2 bg-green-500 hover:bg-green-600 text-white \r focus:outline-none focus:shadow-outline rounded-lg shadow px-7",children:"Anterior"}),Object(m.jsx)("button",{onClick:function(){y(k+1)},className:"mt-6 h-auto w-1/2 md:w-min text-xl p-2 bg-green-500 hover:bg-green-600 text-white \r focus:outline-none focus:shadow-outline rounded-lg shadow px-7",children:"Siguiente"})]}),Object(m.jsx)("h1",{className:"text-xl font-medium text-white text-center mt-6",children:"__________________________________________"}),Object(m.jsx)("h1",{className:"text-2xl font-medium text-black text-center",children:"Posts"}),Object(m.jsx)("div",{className:"flex flex-col content-center md:w-min",children:F})]}),Object(m.jsxs)("div",{className:"flex flex-row gap-4 justify-item-center",children:[Object(m.jsx)("button",{onClick:function(){O(0!==p?p-1:0)},className:"mt-6 h-auto w-1/2 md:w-min text-xl p-2 bg-green-500 hover:bg-green-600 text-white \r focus:outline-none focus:shadow-outline rounded-lg shadow px-7",children:"Anterior"}),Object(m.jsx)("button",{onClick:function(){O(p+1)},className:"mt-6 h-auto w-1/2 md:w-min text-xl p-2 bg-green-500 hover:bg-green-600 text-white \r focus:outline-none focus:shadow-outline rounded-lg shadow px-7",children:"Siguiente"})]}),Object(m.jsx)("h1",{className:"text-xl font-medium text-white text-center mt-6",children:"__________________________________________"}),Object(m.jsx)("button",{onClick:function(){t(),e("/login")},className:"mt-6 h-auto w-1/2 md:w-min text-xl bg-red-600 hover:bg-red-700 text-white \r focus:outline-none focus:shadow-outline rounded-lg shadow px-10 py-2 text-center",children:"Cerrar sesi\xf3n"})]})})}function A(){var e=Object(_.g)(),t=g().logout,n=Object(c.useState)([]),r=Object(u.a)(n,2),s=r[0],a=r[1],o=Object(c.useState)(0),x=Object(u.a)(o,2),b=x[0],j=x[1],f=Object(c.useState)(""),h=Object(u.a)(f,2),p=h[0],O=h[1],v=Object(c.useState)([]),w=Object(u.a)(v,2),N=w[0],k=w[1];Object(c.useEffect)((function(){(function(){var e=Object(i.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.getAll(b);case 2:t=e.sent,a(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[b]);var y=s.map((function(e){return Object(m.jsx)(P,{post:e},e.id)}));return Object(m.jsx)("main",{className:"flex gap-4 flex-col lg:flex-row justify-around items-center p-6 lg:p-10 min-h-screen  bg-gradient-to-r from-green-400 to-blue-400 w-screen",children:Object(m.jsxs)("section",{className:"w-4/5 lg:w-1/2 gap-6 h-full flex flex-col justify-center items-center",children:[Object(m.jsxs)("div",{className:"w-4/5 lg:w-1/2 gap-6 h-full flex flex-col justify-around items-center",children:[Object(m.jsx)("h1",{className:"text-6xl text-black text-center w-screen",children:"\xa1Bienvenido a la p\xe1gina de usuario!"}),Object(m.jsxs)("form",{className:"flex flex-row gap-4",children:[Object(m.jsx)("input",{className:"w-full py-2 px-16 rounded-lg outline-none",type:"text",placeholder:"Buscar Post",onChange:function(e){return O(e.target.value)}}),Object(m.jsx)("button",{className:"w-full rounded-lg bg-pink-500 hover:bg-pink-600",type:"button",onClick:function(e){return function(e){var t=s.filter((function(t){return t.title.toLowerCase().includes(e.toLowerCase())}));k(t)}(p)},children:"Buscar"})]}),Object(m.jsxs)("div",{className:"flex flex-col gap-4",children:[Object(m.jsx)("h3",{className:"text-2xl font-medium text-black text-center",children:"Posts encontrados "}),Object(m.jsx)("div",{className:"flex flex-col gap-4",children:N.map((function(e){return Object(m.jsx)(P,{post:e},e.id)}))})]}),Object(m.jsxs)("div",{className:"flex flex-col mt-6 justify-center",children:[Object(m.jsx)("p",{className:"text-xl font-medium text-white text-center mt-6",children:"__________________________________________"}),Object(m.jsx)("h3",{className:"text-2xl font-medium text-black text-center",children:"Posts"}),Object(m.jsx)("div",{className:"grid ",children:y})]}),Object(m.jsxs)("div",{className:"flex flex-row gap-4 justify-item-center",children:[Object(m.jsx)("button",{onClick:function(){j(0!==b?b-1:0)},className:" mt-6 h-auto w-1/2 md:w-min text-xl p-2 bg-blue-600 hover:bg-blue-700 text-white \r focus:outline-none focus:shadow-outline rounded-lg shadow px-7",children:"Anterior"}),Object(m.jsx)("button",{onClick:function(){j(b+1)},className:"  mt-6 h-auto w-1/2 md:w-min text-xl p-2 bg-blue-600 hover:bg-blue-700 text-white \r focus:outline-none focus:shadow-outline rounded-lg shadow px-7",children:"Siguiente"})]})]}),Object(m.jsx)("button",{onClick:function(){t(),e("/login")},className:" mt-6 h-auto w-1/2 md:w-min text-xl p-2 bg-red-500 hover:bg-red-600 text-white \r focus:outline-none focus:shadow-outline rounded-lg shadow px-7",children:"Cerrar sesi\xf3n"})]})})}var B=function(){var e=Object(_.g)();return Object(m.jsxs)("div",{className:"flex flex-col justify-center items-center w-screen h-screen bg-black",children:[Object(m.jsx)(k.a,{className:"text-8xl m-5"}),Object(m.jsx)("h2",{className:"text-6xl font-roboto text-center mb-6 text-white",children:"404"}),Object(m.jsx)("h3",{className:"text-xl font-roboto text-center text-white",children:"Esta p\xe1gina no se encuentra"}),Object(m.jsx)("p",{className:"text-lg font-roboto text-center text-white",children:"Debes regresar a la p\xe1gina de inicio"}),Object(m.jsx)("button",{className:"font-roboto bg-white m-4 py-2 px-4 rounded text-black hover:bg-gray-200",onClick:function(t){e("/login")},children:"Ir al login"})]})},I={admin:"/admin",user:"/user"},E=function(){var e,t=g().user;return t?Object(m.jsx)(_.a,{replace:!0,to:null!==(e=I[t.role])&&void 0!==e?e:"/"}):Object(m.jsx)("p",{children:" No se puede redireccionar "})},z=function(e){var t=e.role,n=void 0===t?"user":t,c=e.children,r=g(),s=r.token,a=r.user;return s?a&&a.role===n?c:Object(m.jsx)(_.a,{replace:!0,to:"/404"}):Object(m.jsx)(_.a,{replace:!0,to:"/login"})},L=n(8);var F=function(){return Object(m.jsx)(L.a,{children:Object(m.jsxs)(_.d,{children:[Object(m.jsx)(_.b,{path:"/login",element:Object(m.jsx)(w,{})}),Object(m.jsx)(_.b,{path:"/redirect",element:Object(m.jsx)(E,{})}),Object(m.jsx)(_.b,{path:"/admin",element:Object(m.jsx)(z,{role:"admin",children:Object(m.jsx)(T,{})})}),Object(m.jsx)(_.b,{path:"/user",element:Object(m.jsxs)(z,{role:"user",children:[" ",Object(m.jsx)(A,{})," "]})}),Object(m.jsx)(_.b,{path:"*",element:Object(m.jsx)(B,{})})]})})},J=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,25)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,s=t.getLCP,a=t.getTTFB;n(e),c(e),r(e),s(e),a(e)}))};a.a.render(Object(m.jsx)(r.a.StrictMode,{children:Object(m.jsx)(p,{children:Object(m.jsx)(F,{})})}),document.getElementById("root")),J()}},[[23,1,2]]]);
//# sourceMappingURL=main.1998c425.chunk.js.map